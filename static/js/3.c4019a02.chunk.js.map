{"version":3,"sources":["pages/Roll/index.js"],"names":["students","Array","from","map","item","index","student_name","Roll","state","luck","isRoll","rollLuck","setState","cln","setInterval","selOne","stopRoll","clearInterval","len","length","one","Math","floor","random","this","JSON","parse","localStorage","getItem","className","img","type","style","fill","title","message","buttonText","buttonType","onButtonClick","Component"],"mappings":"8PAMMA,EAAWC,MAAMC,KAAK,IAAID,MAAM,MAAME,KAAI,SAACC,EAAMC,GAAY,MAAO,CAAEC,aAAc,SAAMD,MAI1FE,E,2MACJC,MAAQ,CACNC,KAJQ,WAKRC,QAAQ,G,EASVC,SAAW,WACT,EAAKC,SAAS,CACZF,QAAS,EAAKF,MAAME,SACnB,WACG,EAAKF,MAAME,OACb,EAAKG,IAAMC,aAAY,WACrB,EAAKF,SAAS,CACZH,KAAM,EAAKM,aAEZ,GAEH,EAAKC,e,EAMXA,SAAW,WACT,EAAKH,KAAOI,cAAc,EAAKJ,M,EAGjCE,OAAS,WACP,IAAIG,EAAM,EAAKlB,SAASmB,OACpBC,EAAMC,KAAKC,MAAMD,KAAKE,SAAWL,EAAM,GAAK,EAChD,OAAO,EAAKlB,SAASoB,GAAKd,c,mFA7B1BkB,KAAKxB,SAAWyB,KAAKC,MAAMC,aAAaC,QAAQ,cAAgB5B,I,6CAiChEwB,KAAKR,a,+BAEG,IAAD,EACkBQ,KAAKhB,MAAtBC,EADD,EACCA,KAAMC,EADP,EACOA,OACd,OACE,yBAAKmB,UAAU,QACb,2BACE,uBACEC,IAAK,uBAAMC,KAAK,eAAeF,UAAU,MAAMG,MAAO,CAAEC,KAAM,aAC9DC,MAAOzB,EACP0B,QAAQ,2BACRC,WAAa1B,EAAgB,eAAP,eACtB2B,WAAW,UACXC,cAAed,KAAKb,iB,GArDb4B,aA6DJhC","file":"static/js/3.c4019a02.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { WingBlank, Result, Icon } from 'antd-mobile';\n// import axios from '../../utils/axios';\n\n\n\nconst students = Array.from(new Array(100)).map((item, index) => { return { student_name: '王' + index } })\n\nconst DEF = 'luck-man';\n\nclass Roll extends Component {\n  state = {\n    luck: DEF,\n    isRoll: false\n  }\n\n  componentDidMount() {\n    this.students = JSON.parse(localStorage.getItem('students')) || students;\n\n  }\n\n\n  rollLuck = () => {\n    this.setState({\n      isRoll: !this.state.isRoll\n    }, () => {\n      if (this.state.isRoll) {\n        this.cln = setInterval(() => {\n          this.setState({\n            luck: this.selOne()\n          })\n        }, 0);\n      } else {\n        this.stopRoll()\n      }\n    })\n\n  }\n\n  stopRoll = () => {\n    this.cln && clearInterval(this.cln)\n  }\n\n  selOne = () => {\n    let len = this.students.length;\n    let one = Math.floor(Math.random() * len + 1) - 1;\n    return this.students[one].student_name\n  }\n\n  componentWillUnmount() {\n    this.stopRoll()\n  }\n  render() {\n    const { luck, isRoll } = this.state;\n    return (\n      <div className=\"time\">\n        <WingBlank>\n          <Result\n            img={<Icon type=\"check-circle\" className=\"spe\" style={{ fill: '#e94f4f' }} />}\n            title={luck}\n            message=\"随机点名\"\n            buttonText={!isRoll ? '点名' : '停止'}\n            buttonType=\"primary\"\n            onButtonClick={this.rollLuck}\n          />\n        </WingBlank>\n      </div>\n    );\n  }\n}\n\nexport default Roll;"],"sourceRoot":""}