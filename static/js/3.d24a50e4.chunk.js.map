{"version":3,"sources":["pages/Roll/index.js"],"names":["students","Array","from","map","item","index","Roll","state","luck","JSON","parse","localStorage","getItem","isRoll","rollLuck","setState","cln","setInterval","selOne","stopRoll","clearInterval","len","length","Math","floor","random","this","className","img","type","style","fill","title","message","buttonText","buttonType","onButtonClick","Component"],"mappings":"uRAGMA,EAAWC,MAAMC,KAAK,IAAID,MAAM,MAAME,KAAI,SAACC,EAAMC,GAAP,MAAiB,SAAMA,KAIjEC,E,2MACJC,MAAQ,CACNC,KAJQ,WAKRR,SAAUS,KAAKC,MAAMC,aAAaC,QAAQ,cAAgBZ,EAC1Da,QAAQ,G,EAGVC,SAAW,WACT,EAAKC,SAAS,CACZF,QAAS,EAAKN,MAAMM,SACnB,WACG,EAAKN,MAAMM,OACb,EAAKG,IAAMC,aAAY,WACrB,EAAKF,SAAS,CACZP,KAAM,EAAKU,aAEZ,GAEH,EAAKC,e,EAMXA,SAAW,WACT,EAAKH,KAAOI,cAAc,EAAKJ,M,EAGjCE,OAAS,WAAO,IACNlB,EAAa,EAAKO,MAAlBP,SACJqB,EAAMrB,EAASsB,OAEnB,OAAOtB,EADGuB,KAAKC,MAAMD,KAAKE,SAAWJ,EAAM,GAAK,I,sFAKhDK,KAAKP,a,+BAEG,IAAD,EACkBO,KAAKnB,MAAtBC,EADD,EACCA,KAAMK,EADP,EACOA,OACd,OACE,uBAAMc,UAAU,QACd,2BACE,uBACEC,IAAK,uBAAMC,KAAK,eAAeF,UAAU,MAAMG,MAAO,CAAEC,KAAM,aAC9DC,MAAOxB,EACPyB,QAAQ,2BACRC,WAAarB,EAAgB,eAAP,eACtBsB,WAAW,UACXC,cAAeV,KAAKZ,iB,GAjDbuB,aAyDJ/B","file":"static/js/3.d24a50e4.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Flex, WingBlank, Result, Icon } from 'antd-mobile';\n\nconst students = Array.from(new Array(100)).map((item, index) => '王' + index)\n\nconst DEF = 'luck-man';\n\nclass Roll extends Component {\n  state = {\n    luck: DEF,\n    students: JSON.parse(localStorage.getItem('students')) || students,\n    isRoll: false\n  }\n\n  rollLuck = () => {\n    this.setState({\n      isRoll: !this.state.isRoll\n    }, () => {\n      if (this.state.isRoll) {\n        this.cln = setInterval(() => {\n          this.setState({\n            luck: this.selOne()\n          })\n        }, 0);\n      } else {\n        this.stopRoll()\n      }\n    })\n\n  }\n\n  stopRoll = () => {\n    this.cln && clearInterval(this.cln)\n  }\n\n  selOne = () => {\n    const { students } = this.state;\n    let len = students.length;\n    let one = Math.floor(Math.random() * len + 1) - 1;\n    return students[one]\n  }\n\n  componentWillUnmount() {\n    this.stopRoll()\n  }\n  render() {\n    const { luck, isRoll } = this.state;\n    return (\n      <Flex className=\"time\">\n        <WingBlank>\n          <Result\n            img={<Icon type=\"check-circle\" className=\"spe\" style={{ fill: '#e94f4f' }} />}\n            title={luck}\n            message=\"随机点名\"\n            buttonText={!isRoll ? '点名' : '停止'}\n            buttonType=\"primary\"\n            onButtonClick={this.rollLuck}\n          />\n        </WingBlank>\n      </Flex>\n    );\n  }\n}\n\nexport default Roll;"],"sourceRoot":""}